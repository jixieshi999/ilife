
<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
<style type="text/css">
li {
    position: relative;
    margin-top: 0.2rem;
    background-color: #fff;
    background-size: 7.5rem 2.2rem;
    border-bottom: 1px solid #dddddd;
}
</style>
  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="initial-scale=1, user-scalable=0, minimal-ui">
  <meta charset="utf-8">
  <title>哎生活</title>
  <meta name="description" content="">
  <meta name="author" content="">


	<script src="http://juahya.com/js/bmob-min.js"></script> 

	<script class="jquery library" src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
	<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e15a0633f24d8c4441c875dd8ea0ce99";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>

			<ol  id="content" >
			
			
				<li>
					新闻资讯
				</li>
				<li>
					体育竞技
				</li>
			</ol>
			
			
			<div class="pagination pagination-small">

				<ul>
					<li id="c_limit_pre" >
						<a href="#">上一页</a>
					</li>
					<li id="c_limit_1" >
						<a >1</a>
					</li>
					<li id="c_limit_next" >
						<a >下一页</a>
					</li>
				</ul>
			</div>

	<!--		
<br>
<button onclick="addchat('Bill Gates','CEO','df','dfb')">点击这里</button>
-->

  <script type="text/javascript">
  $("#c_main_").click(function(){
    currentType==0;
	myFunction(0,7,0);
});
$("#c_main_txt").click(function(){
    currentType=0;
	myFunction(0,7,0);
});
$("#c_main_pic").click(function(){
    currentType=1;
	myFunction(currentType,7,0);
});
$("#c_main_mv").click(function(){
    currentType=2;
	myFunction(currentType,7,0);
});
$("#c_main_blog").click(function(){
	window.open ('blog/index.html')  
});

var currentType=0;
var currentDateGlobal;
var preDateGlobal;
$("#c_limit_pre").click(function(){
	myFunction(currentType,1,preDateGlobal);
});
$("#c_limit_next").click(function(){
	myFunction(currentType,7,currentDateGlobal);
});
$("#c_limit_1").click(function(){
	myFunction(currentType,7,0);
});
	myFunction(0,7,0);
function myFunction(inputtype,prenxt,currentDate)
{
    Bmob.initialize("69f77c763c1dfdfb45ffa1b925ed7ca9", "aade001c77e009552a24b35d51b08434");
	//alert("imei");
    	var aaa=30;
	//获取一行数据
	var GameScore = Bmob.Object.extend("wzwchatlist");
	var query = new Bmob.Query(GameScore);
	//query.equalTo("type",inputtype);
	if(prenxt==1){//pre
	   query.ascending("createdAt");
	    if(0!=currentDate){
    		 query.greaterThanOrEqualTo("time",currentDate);
    		}
	}else{//nxt
	   query.descending("createdAt");
	    if(0!=currentDate){
//alert("ct:"+currentDate+",pre:"+preDateGlobal+",nxt"+currentDateGlobal);
    	   query.lessThanOrEqualTo("time",currentDate);
    		}
	}
	query.limit(7);
	query.find( {
	  success: function(object) {
		//alert(object[0].get("record"));
		$('#content').empty();
	    	if(prenxt==1){//pre
			for (i=object.length-1;i>=0;i--)
	    		{
	    		  addItem(object[i]);
	    		}
	    	}else{//nxt
		        for (i=0;i<object.length;i++)
	    		{
	    		  addItem(object[i]);
	    		}
	    	
		}
		currentDateGlobal =object[object.length-1].get("time");
		preDateGlobal=object[0].get("time");
		/*
        var d = new Date();
        d.setTime(preDateGlobal);
        var d1 = new Date();
        d1.setTime(currentDateGlobal);
		//alert("pre:"+d+",nxt"+d1);
		*/
	  },
	  error: function(object, error) {
		alert("query object fail");
	  }
	});
}


function addItem(obj){
		    $('#content').append('<li>'+obj.get("name")+'<br>'
		    +obj.get("content")+'<br>'
		    +obj.get("time").toString()+'</li>');
            
}

function addchat(str,name,imeistr,date)
{
    Bmob.initialize("69f77c763c1dfdfb45ffa1b925ed7ca9", "aade001c77e009552a24b35d51b08434");
var GameScore = Bmob.Object.extend("wzwchatlist");
    var gameScore = new GameScore();
    gameScore.set("name", name);
    gameScore.set("content", str);
    gameScore.set("imei", imeistr);
    gameScore.set("time", date);
    gameScore.save(null, {
      success: function(object) {
        //alert("create object success, object id:"+object.id);
	    myFunction(currentType,7,0);
      },
      error: function(model, error) {
        //alert("create object fail");
      }
    });
}
</script>



<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
