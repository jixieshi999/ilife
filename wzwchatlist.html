
<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="initial-scale=1, user-scalable=0, minimal-ui">
  <meta charset="utf-8">
  <title>哎生活</title>
  <meta name="description" content="">
  <meta name="author" content="">

	<link href="http://www.bootcss.com/p/layoutit/css/bootstrap-combined.min.css" rel="stylesheet">
	<link href="http://www.bootcss.com/p/layoutit/css/layoutit.css" rel="stylesheet">

	<script src="http://xflour.com/js/bmob-min.js"></script> 

	<script class="jquery library" src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="http://www.bootcss.com/p/layoutit/js/bootstrap.min.js"></script>
	<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e15a0633f24d8c4441c875dd8ea0ce99";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container-fluid">
	<div class="row-fluid">
		<div class="span2">
		</div>
		<div class="span6">
			<ul class="nav nav-tabs" >
				<li class="active"  id="c_main_" >
					<a href="#" >首页</a>
				</li>
				<li id="c_main_txt" >
					<a href="#">文字</a>
				</li>
				<li   id="c_main_pic" >
					<a href="#">图片</a>
				</li>
				<li   id="c_main_mv" >
					<a href="#">美女</a>
				</li>
				<li   id="c_main_blog" >
					<a href="#">博客</a>
				</li>
				<li class="dropdown pull-right">
					 <a href="#" data-toggle="dropdown" class="dropdown-toggle">下拉<strong class="caret"></strong></a>
					<ul class="dropdown-menu">
						<li>
							<a href="#">操作</a>
						</li>
						<li>
							<a href="#">设置栏目</a>
						</li>
						<li>
							<a href="#">更多设置</a>
						</li>
						<li class="divider">
						</li>
						<li>
							<a href="#">分割线</a>
						</li>
					</ul>
				</li>
			</ul>
			<div  id="content" >
			
			
				<li>
					新闻资讯
				</li>
				<li>
					体育竞技
				</li>
			</div>
			
			<div class="pagination pagination-small">

				<ul>
					<li id="c_limit_pre" >
						<a href="#">上一页</a>
					</li>
					<li id="c_limit_1" >
						<a >1</a>
					</li>
					<li id="c_limit_next" >
						<a >下一页</a>
					</li>
				</ul>
			</div>
			<!-- 多说评论框 start -->
			<div class="ds-thread" data-thread-key="index" data-title="ilife" data-url="index.html"></div>

		</div>
		<div class="span4">
		</div>
	</div>
</div>
<br>
<button onclick="addchat('Bill Gates','CEO','df','dfb')">点击这里</button>


  <script type="text/javascript">
  $("#c_main_").click(function(){
    currentType==0;
	myFunction(0,7,0);
});
$("#c_main_txt").click(function(){
    currentType=0;
	myFunction(0,7,0);
});
$("#c_main_pic").click(function(){
    currentType=1;
	myFunction(currentType,7,0);
});
$("#c_main_mv").click(function(){
    currentType=2;
	myFunction(currentType,7,0);
});
$("#c_main_blog").click(function(){
	window.open ('blog/index.html')  
});

var currentType=0;
var currentDateGlobal;
var preDateGlobal;
$("#c_limit_pre").click(function(){
	myFunction(currentType,1,preDateGlobal);
});
$("#c_limit_next").click(function(){
	myFunction(currentType,7,currentDateGlobal);
});
$("#c_limit_1").click(function(){
	myFunction(currentType,7,0);
});
	myFunction(0,7,0);
function myFunction(inputtype,prenxt,currentDate)
{
    Bmob.initialize("69f77c763c1dfdfb45ffa1b925ed7ca9", "aade001c77e009552a24b35d51b08434");
	//alert("imei");
    	var aaa=30;
	//获取一行数据
	var GameScore = Bmob.Object.extend("wzwchatlist");
	var query = new Bmob.Query(GameScore);
	//query.equalTo("type",inputtype);
	if(prenxt==1){//pre
	   query.ascending("createdAt");
	    if(0!=currentDate){
    		 query.greaterThanOrEqualTo("time",currentDate);
    		}
	}else{//nxt
	   query.descending("createdAt");
	    if(0!=currentDate){
//alert("ct:"+currentDate+",pre:"+preDateGlobal+",nxt"+currentDateGlobal);
    	   query.lessThanOrEqualTo("time",currentDate);
    		}
	}
	query.limit(7);
	query.find( {
	  success: function(object) {
		//alert(object[0].get("record"));
		$('#content').empty();
	    	if(prenxt==1){//pre
			for (i=object.length-1;i>=0;i--)
	    		{
	    		  addItem(object[i]);
	    		}
	    	}else{//nxt
		        for (i=0;i<object.length;i++)
	    		{
	    		  addItem(object[i]);
	    		}
	    	
		}
		currentDateGlobal =object[object.length-1].get("time");
		preDateGlobal=object[0].get("time");
		/*
        var d = new Date();
        d.setTime(preDateGlobal);
        var d1 = new Date();
        d1.setTime(currentDateGlobal);
		//alert("pre:"+d+",nxt"+d1);
		*/
	  },
	  error: function(object, error) {
		alert("query object fail");
	  }
	});
}


function addItem(obj){

			//alert(obj.get("content");
			//var obj=obj.get("content");
			/**
			
            if(''!=obj.get("field")){
		    $('#content').append('<li>'+obj.get("content")
		    +'');
		    $('#content').append("<br/> <a target='_blank'  href='"+obj.get("field")+"'>"
		    +" <img src='"+obj.get("field")+"' width='100px' height='100px'>"
		    +"</a>"
		    +'</li>');
            }else{
		    $('#content').append('<li>'+obj.get("content")+'</li>');
            }
			----------------------------------------------------------------------------
			<div class="alert alert-success"> 
				<h4>
					提示!
				</h4> <strong>警告!</strong> 请注意你的个人隐私安全.
			</div>
			*/
			var kk=0;
			kk=obj.get("time");
            var de = new Date();
            de.setTime(kk);
		    $('#content').append('<li>'+obj.get("content")+'</li>');
            
}
  </script>
  
<script>

function addchat(str,name,imeistr,date)
{
    Bmob.initialize("69f77c763c1dfdfb45ffa1b925ed7ca9", "aade001c77e009552a24b35d51b08434");
alert("str " + str + ", name " + name+",imeistr "+imeistr+",date "+date);
$("p").after("str " + str + ", name " + name+",imeistr "+imeistr+",date "+date+"<br>");
var GameScore = Bmob.Object.extend("wzwchatlist");
    var gameScore = new GameScore();
    gameScore.set("name", name);
    gameScore.set("content", str);
    gameScore.set("imei", imeistr);
    gameScore.save(null, {
      success: function(object) {
        alert("create object success, object id:"+object.id);
      },
      error: function(model, error) {
        alert("create object fail");
      }
    });
}
</script>


<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"xflour"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
