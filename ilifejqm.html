<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css">
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
	
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
<link href="http://designmodo.github.io/Flat-UI/dist/css/flat-ui.min.css" rel="stylesheet">
		<script class="jquery library" src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
<!-- 
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
-->
  <script src="./js/bmob-min.js"></script> 
	<title>哎生活</title>
	<!-- 
  <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
	<link id="bootstrap_331" rel="stylesheet" type="text/css" class="library" href="http://cdn.bootcss.com/bootstrap/2.2.1/css/bootstrap.min.css">
	<link id="bootstrap_331" rel="stylesheet" type="text/css" class="library" href="http://cdn.bootcss.com/bootstrap/3.3.1/css/bootstrap.min.css">
	-->
	<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
</head>
<body>

<div data-role="page" id="pageone">
	
  <div data-role="header">
  </div>
  <div data-role="content">
		
		<div   data-role="controlgroup" data-type="horizontal">
		<a href="#pagetwo" data-role="button" data-inline="true"  id="c_main_">首页</a>
		<a href="#pagetwo" data-role="button" data-inline="true" id="c_main_txt">文字</a>
		<a href="#pagetwo" data-role="button" data-inline="true" id="c_main_pic">图片</a>
		<a href="#pagetwo" data-role="button" data-inline="true" id="c_main_mv">美女</a>
		</div>
    <ol data-role="listview" data-inset="true"  id="content">
      <li data-icon="false"><a  >s</a></li>
    </ol>
		
  <div   data-role="controlgroup" data-type="horizontal">
    <a href="#link" data-role="button" data-icon="arrow-l" data-iconpos="notext"  id="c_limit_pre">Search</a>
    <a href="#link" data-role="button" data-icon="home" data-iconpos="notext" id="c_limit_1">Search</a>
    <a href="#link" data-role="button" data-icon="arrow-r" data-iconpos="notext" id="c_limit_next">Search</a>
  </div>
		
  </div>
	
</div> 
 <script type="text/javascript">
  $("#c_main_").click(function(){
    currentType==0;
	myFunction(0,7,0);
});
$("#c_main_txt").click(function(){
    currentType=0;
	myFunction(0,7,0);
});
$("#c_main_pic").click(function(){
    currentType=1;
	myFunction(currentType,7,0);
});
$("#c_main_mv").click(function(){
    currentType=2;
	myFunction(currentType,7,0);
});
var currentType=0;
var currentDateGlobal;
var preDateGlobal;
$("#c_limit_pre").click(function(){
	myFunction(currentType,1,preDateGlobal);
});
$("#c_limit_next").click(function(){
	myFunction(currentType,7,currentDateGlobal);
});
$("#c_limit_1").click(function(){
	myFunction(currentType,7,0);
});
	myFunction(0,7,0);
function myFunction(inputtype,prenxt,currentDate)
{
    Bmob.initialize("69f77c763c1dfdfb45ffa1b925ed7ca9", "aade001c77e009552a24b35d51b08434");
	//alert("imei");
    	var aaa=30;
	//获取一行数据
	var GameScore = Bmob.Object.extend("BWeiData");
	var query = new Bmob.Query(GameScore);
	query.equalTo("type",inputtype);
	if(prenxt==1){//pre
	   query.ascending("createdAt");
	    if(0!=currentDate){
    		 query.greaterThanOrEqualTo("time",currentDate);
    		}
	}else{//nxt
	   query.descending("createdAt");
	    if(0!=currentDate){
//alert("ct:"+currentDate+",pre:"+preDateGlobal+",nxt"+currentDateGlobal);
    	   query.lessThanOrEqualTo("time",currentDate);
    		}
	}
	query.limit(7);
	query.find( {
	  success: function(object) {
		//alert(object[0].get("record"));
		$('#content').empty();
	    	if(prenxt==1){//pre
			for (i=object.length-1;i>=0;i--)
	    		{
	    		  addItem(object[i]);
	    		}
	    	}else{//nxt
		        for (i=0;i<object.length;i++)
	    		{
	    		  addItem(object[i]);
	    		}
	    	
		}
		currentDateGlobal =object[object.length-1].get("time");
		preDateGlobal=object[0].get("time");
		/*
        var d = new Date();
        d.setTime(preDateGlobal);
        var d1 = new Date();
        d1.setTime(currentDateGlobal);
		//alert("pre:"+d+",nxt"+d1);
		*/
	  },
	  error: function(object, error) {
		alert("query object fail");
	  }
	});
}
function addItem(obj){
			//alert(obj.get("content");
			//var obj=obj.get("content");
			var kk=0;
			kk=obj.get("time");
            var de = new Date();
            de.setTime(kk);
            if(''!=obj.get("field")){
							// <li data-icon="false"><a  >s</a></li>
		    $('#content').append('<li data-icon="false"><a  >'+obj.get("content")
		    +'');
		    $('#content').append("<br/> <a target='_blank'  href='"+obj.get("field")+"'>"
		    +" <img src='"+obj.get("field")+"' width='100px' height='100px'>"
		    +"</a>"
		    +'</a></li>');
            }else{
							$('#content').append(' <li data-icon="false"><p> <span style="font-size:12px;">&nbsp;&nbsp;&nbsp;&nbsp;</span> '+obj.get("content")+'</p></li><br/>');
            }
}
function unActiveAll(){
/**
	$("#c_main_").removeClass('active'); 
	$("#c_main_txt").removeClass('active'); 
	$("#c_main_pic").removeClass('active'); 
	$("#c_main_mv").removeClass('active'); 
	*/
}
  </script>
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3fa75fc46df2b55d01f8007dacd369db";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>
